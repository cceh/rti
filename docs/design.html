

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Electrical Design &mdash; RTI 0.1.1 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
        <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/latest.js?config=TeX-AMS-MML_HTMLorMML"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <link rel="stylesheet" href="_static/my_theme.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Dome User Manual" href="user.html" />
    <link rel="prev" title="Dome Builder Manual" href="builder.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home"> RTI
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html">Introduction to RTI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="intro.html#outline">Outline</a></li>
<li class="toctree-l2"><a class="reference internal" href="intro.html#the-math">The Math</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="builder.html">Dome Builder Manual</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Electrical Design</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#choice-of-led">Choice of LED</a></li>
<li class="toctree-l3"><a class="reference internal" href="#led-driver">Led Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="#constant-current-source">Constant Current Source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#microcontroller">Microcontroller</a></li>
<li class="toctree-l3"><a class="reference internal" href="#connectors">Connectors</a></li>
<li class="toctree-l3"><a class="reference internal" href="#board-layout">Board Layout</a></li>
<li class="toctree-l3"><a class="reference internal" href="#case">Case</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="user.html">Dome User Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="shooting.html">Shooting Manual</a><ul>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#camera-settings">Camera Settings</a></li>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#dome-setup">Dome Setup</a></li>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#shooting">Shooting</a></li>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#various-notes">Various Notes</a></li>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#camera-manuals">Camera Manuals</a></li>
<li class="toctree-l3"><a class="reference internal" href="shooting.html#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="lens_selection.html">Lens Selection</a><ul>
<li class="toctree-l3"><a class="reference internal" href="lens_selection.html#buying-lenses">Buying Lenses</a></li>
<li class="toctree-l3"><a class="reference internal" href="lens_selection.html#object-sizes">Object Sizes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="raw_or_jpeg.html">RAW or JPEG?</a><ul>
<li class="toctree-l3"><a class="reference internal" href="raw_or_jpeg.html#raw">RAW</a></li>
<li class="toctree-l3"><a class="reference internal" href="raw_or_jpeg.html#jpeg">JPEG</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vibrations.html">Vibration Reduction</a><ul>
<li class="toctree-l3"><a class="reference internal" href="vibrations.html#live-view">Live View</a></li>
<li class="toctree-l3"><a class="reference internal" href="vibrations.html#exposure-delay-mode">Exposure Delay Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="vibrations.html#mirrorless-cameras">Mirrorless Cameras</a></li>
<li class="toctree-l3"><a class="reference internal" href="vibrations.html#footnotes">Footnotes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="user_scripts.html">Scripts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#scripts-image-filer-py">scripts/image-filer.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#scripts-image-converter-py">scripts/image-converter.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#scripts-lp-builder-py">scripts/lp-builder.py</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#bin-ptm-encoder">bin/ptm-encoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#bin-ptm-decoder">bin/ptm-decoder</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#bin-ptm-exploder">bin/ptm-exploder</a></li>
<li class="toctree-l3"><a class="reference internal" href="user_scripts.html#sample-lp-file-format">sample.lp file format</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="developer.html">Software Developer Manual</a><ul>
<li class="toctree-l2"><a class="reference internal" href="firmware.html">Firmware</a></li>
<li class="toctree-l2"><a class="reference internal" href="programming.html">Programming the AVR-Microcontroller</a><ul>
<li class="toctree-l3"><a class="reference internal" href="programming.html#prerequisites">Prerequisites</a></li>
<li class="toctree-l3"><a class="reference internal" href="programming.html#program-the-microcontroller">Program the Microcontroller</a></li>
<li class="toctree-l3"><a class="reference internal" href="programming.html#initialize-a-new-microcontroller">Initialize a New Microcontroller</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="ptmlib.html">ptmlib</a><ul>
<li class="toctree-l3"><a class="reference internal" href="ptmlib.html#ptmlib-h">ptmlib.h</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">Glossary</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">RTI</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
          <li><a href="builder.html">Dome Builder Manual</a> &raquo;</li>
        
      <li>Electrical Design</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/design.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="electrical-design">
<h1>Electrical Design<a class="headerlink" href="#electrical-design" title="Permalink to this headline">¶</a></h1>
<p>The main goals of this design were:</p>
<ul class="simple">
<li><p>to use bright and affordable LEDs,</p></li>
<li><p>to use only user-solderable off-the-shelf components,</p></li>
<li><p>the dome should look to the camera like an ordinary flash gun,</p></li>
<li><p>the dome should work with any camera using standard interfaces.</p></li>
</ul>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>While researching affordable RTI domes on the internet we found electrical
designs like this: <a class="footnote-reference brackets" href="#id3" id="id1">1</a> <a class="footnote-reference brackets" href="#id4" id="id2">2</a></p>
<div class="figure align-center" id="id5">
<div class="pic">


<!-- Creator: dpic version 2019.11.30 option -v for SVG 1.1 -->
<!-- width="698" height="180" -->
<svg
 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
 xml:space="preserve"
 style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision;
 image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
 width="697.2px" height="178.8px"
 viewBox="0 0 697.2 178.8"
 font-size="11pt" text-anchor="middle"
 stroke="black" stroke-miterlimit="10" stroke-width="1.066667" fill="none">
<g>
<rect fill="#fbfb77" stroke-width="2"
 stroke="#a80136"
 x="2" y="15.4" rx="24" ry="24" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="64.4" y="36.906667">user must</text>
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="64.4" y="51.573333">set timing</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="168.4,39.4 165.2,37
174.8,39.4 165.2,41.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="126.8" y1="39.4" x2="172.051263" y2="39.4" />
<rect fill="#fefece" stroke-width="2"
 stroke="#a80136"
 x="174.8" y="15.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="237.2" y="44.24">Controller</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="389.2,39.4 386,37
395.6,39.4 386,41.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="299.6" y1="39.4" x2="392.851263" y2="39.4" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="346.225631" y="36.733333">shutter</text>
<rect fill="#fefece" stroke-width="2"
 stroke="#000000"
 x="395.6" y="15.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="458" y="44.24">Camera</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="526.8,39.4 530,41.8
520.4,39.4 530,37" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="523.148737" y1="39.4" x2="568.4" y2="39.4" />
<rect fill="#fbfb77" stroke-width="2"
 stroke="#a80136"
 x="568.4" y="15.4" rx="24" ry="24" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="630.8" y="36.906667">user must</text>
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="630.8" y="51.573333">set exposure</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="237.2,105 239.6,101.8
237.2,111.4 234.8,101.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="237.2" y1="63.4" x2="237.2" y2="108.651263" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" text-anchor="end"
 x="234.533333" y="90.865631">step</text>
<rect fill="#fefece" stroke-width="2"
 stroke="#a80136"
 x="174.8" y="111.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="237.2" y="140.24">LED Driver</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="389.2,135.4 386,133
395.6,135.4 386,137.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="299.6" y1="135.4" x2="392.851263" y2="135.4" />
<rect fill="#fefece" stroke-width="2"
 stroke="#000000"
 x="395.6" y="111.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="458" y="140.24">Dome</text>
<rect stroke-width="2"
 stroke-dasharray="5.6,4"
 x="160.4" y="1" width="153.6" height="172.8" />
</g></svg>
</div>
<p class="caption"><span class="caption-text">Typical design found on the internet</span><a class="headerlink" href="#id5" title="Permalink to this image">¶</a></p>
</div>
<p>The camera is in single-shot mode.  The controller tells the LED driver to turn
on the next LED and then presses the camera shutter button.  The camera takes
one picture.  After a programmable time lapse the controller releases the
shutter button and tells the LED driver to turn the LED off.  After another
programmable interval the cycle starts again, as many times as there are LEDs in
the dome.</p>
<div class="figure align-center" id="id6">
<div class="pic">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="804px" preserveAspectRatio="none" style="width:567px;height:804px;" version="1.1" viewBox="0 0 567 804" width="567px" zoomAndPan="magnify"><defs><filter height="300%" id="f1vkpipwoea0k6" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="173.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="316.3594"/><rect fill="#CCCCCC" filter="url(#f1vkpipwoea0k6)" height="173.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="518.8906"/><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="130.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="316.3594"/><rect fill="#CCCCCC" filter="url(#f1vkpipwoea0k6)" height="192.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="460.625"/><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="260.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="511" y="287.2266"/><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="480.4609" style="stroke: #000000; stroke-width: 2.0;" width="445" x="111" y="219.8281"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="86.2969" y2="717.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="190.5" x2="190.5" y1="86.2969" y2="717.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="321.5" x2="321.5" y1="86.2969" y2="717.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="411.5" x2="411.5" y1="86.2969" y2="717.2891"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="516" x2="516" y1="86.2969" y2="717.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#f1vkpipwoea0k6)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="729.2842">User</text><ellipse cx="27" cy="742.5859" fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,750.5859 L27,777.5859 M14,758.5859 L40,758.5859 M27,777.5859 L14,792.5859 M27,777.5859 L40,792.5859 " fill="none" filter="url(#f1vkpipwoea0k6)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="148.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="155.5" y="70.9951">Controller</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="148.5" y="716.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="155.5" y="736.2842">Controller</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="286.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="293.5" y="70.9951">Camera</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="286.5" y="716.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="293.5" y="736.2842">Camera</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="367.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="374.5" y="70.9951">LED Driver</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="367.5" y="716.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="374.5" y="736.2842">LED Driver</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="486" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="493" y="70.9951">Dome</text><rect fill="#FEFECE" filter="url(#f1vkpipwoea0k6)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="486" y="716.2891"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="493" y="736.2842">Dome</text><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="173.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="316.3594"/><rect fill="#CCCCCC" filter="url(#f1vkpipwoea0k6)" height="173.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="186" y="518.8906"/><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="130.2656" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="316.3594"/><rect fill="#CCCCCC" filter="url(#f1vkpipwoea0k6)" height="192.6641" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="317" y="460.625"/><rect fill="#FFFFFF" filter="url(#f1vkpipwoea0k6)" height="260.7969" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="511" y="287.2266"/><polygon fill="#A80036" points="310,113.4297,320,117.4297,310,121.4297,314,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="316" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="34" y="112.3638">set exposure</text><polygon fill="#A80036" points="179,142.5625,189,146.5625,179,150.5625,183,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="185" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="34" y="141.4966">set sleeping interval 1</text><polygon fill="#A80036" points="179,171.6953,189,175.6953,179,179.6953,183,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="185" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="140" x="34" y="170.6294">set sleeping interval 2</text><polygon fill="#A80036" points="179,200.8281,189,204.8281,179,208.8281,183,204.8281" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="185" y1="204.8281" y2="204.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="34" y="199.7622">push start button</text><path d="M111,219.8281 L188,219.8281 L188,226.8281 L178,236.8281 L111,236.8281 L111,219.8281 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="480.4609" style="stroke: #000000; stroke-width: 2.0;" width="445" x="111" y="219.8281"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="126" y="232.895">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="203" y="232.0386">[on all LEDs in dome]</text><polygon fill="#A80036" points="400,254.0938,410,258.0938,400,262.0938,404,258.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="406" y1="258.0938" y2="258.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="198" y="253.0278">turn LED on</text><polygon fill="#A80036" points="499,283.2266,509,287.2266,499,291.2266,503,287.2266" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="412" x2="505" y1="287.2266" y2="287.2266"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="419" y="282.1606">turn LED on</text><polygon fill="#A80036" points="305,312.3594,315,316.3594,305,320.3594,309,316.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="196" x2="311" y1="316.3594" y2="316.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="203" y="311.2935">press shutter</text><polygon fill="#FBFB77" filter="url(#f1vkpipwoea0k6)" points="269,354.3594,375,354.3594,385,365.3594,375,377.3594,269,377.3594,259,365.3594,269,354.3594" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="271" y="370.4263">taking exposure</text><polygon fill="#FBFB77" filter="url(#f1vkpipwoea0k6)" points="131,387.4922,251,387.4922,261,398.4922,251,410.4922,131,410.4922,121,398.4922,131,387.4922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="133" y="403.5591">sleeping interval 1</text><polygon fill="#FFFFFF" points="423,442.625,413,446.625,423,450.625,419,446.625" style="stroke: #FFFFFF; stroke-width: 1.0;"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="417" x2="510" y1="446.625" y2="446.625"/><polygon fill="#FFFFFF" points="423,456.625,413,460.625,423,464.625,419,460.625" style="stroke: #FFFFFF; stroke-width: 1.0;"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="417" x2="510" y1="460.625" y2="460.625"/><polygon fill="#A80036" points="305,485.7578,315,489.7578,305,493.7578,309,489.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="191" x2="311" y1="489.7578" y2="489.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="198" y="484.6919">release shutter</text><polygon fill="#A80036" points="400,514.8906,410,518.8906,400,522.8906,404,518.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="196" x2="406" y1="518.8906" y2="518.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="203" y="513.8247">turn LED off</text><polygon fill="#A80036" points="504,544.0234,514,548.0234,504,552.0234,508,548.0234" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="412" x2="510" y1="548.0234" y2="548.0234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="419" y="542.9575">turn LED off</text><polygon fill="#FBFB77" filter="url(#f1vkpipwoea0k6)" points="275,561.0234,368,561.0234,378,572.0234,368,584.0234,275,584.0234,265,572.0234,275,561.0234" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="277" y="577.0903">saving picture</text><polygon fill="#FBFB77" filter="url(#f1vkpipwoea0k6)" points="131,594.1563,251,594.1563,261,605.1563,251,617.1563,131,617.1563,121,605.1563,131,594.1563" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="116" x="133" y="610.2231">sleeping interval 2</text><polygon fill="#FFFFFF" points="504,649.2891,514,653.2891,504,657.2891,508,653.2891" style="stroke: #FFFFFF; stroke-width: 1.0;"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="412" x2="510" y1="653.2891" y2="653.2891"/><polygon fill="#FFFFFF" points="504,688.2891,514,692.2891,504,696.2891,508,692.2891" style="stroke: #FFFFFF; stroke-width: 1.0;"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="412" x2="510" y1="692.2891" y2="692.2891"/><!--
@startuml
actor User               as u
participant Controller   as ctrl
participant Camera       as cam
participant "LED Driver" as drv
participant Dome         as dome

u -> cam  : set exposure
u -> ctrl : set sleeping interval 1
u -> ctrl : set sleeping interval 2
u -> ctrl : push start button

loop on all LEDs in dome
ctrl -> drv  : turn LED on
drv  -> dome : turn LED on
activate dome
ctrl -> cam  : press shutter
activate ctrl
activate cam
|||
hnote over cam  : taking exposure
hnote over ctrl : sleeping interval 1
|||
dome -[#transparent]> drv
deactivate cam
dome -[#transparent]> drv
activate cam #ccc
ctrl -> cam : release shutter
deactivate ctrl
ctrl -> drv : turn LED off
activate ctrl #ccc
drv -> dome : turn LED off
deactivate dome
hnote over cam  : saving picture
hnote over ctrl : sleeping interval 2
|||
drv -[#transparent]> dome
deactivate cam
|||
drv -[#transparent]> dome
deactivate ctrl
end
@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Debian-1
Operating System: Linux
OS Version: 5.3.0-3-amd64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">Typical design sequence diagram</span><a class="headerlink" href="#id6" title="Permalink to this image">¶</a></p>
</div>
<p>This is sub-optimal because the controller does not know when the camera is done
with the current exposure nor when it is ready to take the next exposure.  This
depends on the exposure time, the size of the picture file, the speed of the
camera memory system, and many other things.  The optimal intervals can only be
found by experiment.  You must program generous intervals because if any
interval is too short the camera will miss exposures and you will get an
unusable set of pictures.</p>
<p>The CCeH driver module takes a different approach that does not have these
disadvantages.</p>
<div class="figure align-center" id="id7">
<div class="pic">


<!-- Creator: dpic version 2019.11.30 option -v for SVG 1.1 -->
<!-- width="540" height="180" -->
<svg
 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"
 xml:space="preserve"
 style="shape-rendering:geometricPrecision; text-rendering:geometricPrecision;
 image-rendering:optimizeQuality; fill-rule:evenodd; clip-rule:evenodd"
 width="538.8px" height="178.8px"
 viewBox="0 0 538.8 178.8"
 font-size="11pt" text-anchor="middle"
 stroke="black" stroke-miterlimit="10" stroke-width="1.066667" fill="none">
<g>
<rect fill="#fefece" stroke-width="2"
 stroke="#a80136"
 x="16.4" y="15.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="78.8" y="44.24">Controller</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="230.8,39.4 227.6,37
237.2,39.4 227.6,41.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="141.2" y1="39.4" x2="234.451263" y2="39.4" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="187.825631" y="36.733333">shutter</text>
<rect fill="#fefece" stroke-width="2"
 stroke="#000000"
 x="237.2" y="15.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="299.6" y="44.24">Camera</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="368.4,39.4 371.6,41.8
362,39.4 371.6,37" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="364.748737" y1="39.4" x2="410" y2="39.4" />
<rect fill="#fbfb77" stroke-width="2"
 stroke="#a80136"
 x="410" y="15.4" rx="24" ry="24" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="472.4" y="36.906667">user must</text>
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="472.4" y="51.573333">set exposure</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="78.8,69.8 76.4,73
78.8,63.4 81.2,73" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="78.8" y1="66.148737" x2="78.8" y2="111.4" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" text-anchor="end"
 x="76.133333" y="93.614369">done</text>
<rect fill="#fefece" stroke-width="2"
 stroke="#a80136"
 x="16.4" y="111.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="78.8" y="140.24">LED Driver</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="230.8,135.4 227.6,133
237.2,135.4 227.6,137.8" />
<line stroke-width="1.333333"
 stroke="#a80136"
 x1="141.2" y1="135.4" x2="234.451263" y2="135.4" />
<rect fill="#fefece" stroke-width="2"
 stroke="#000000"
 x="237.2" y="111.4" width="124.8" height="48" />
<text font-size="11pt" stroke-width="0.2pt" fill="black" x="299.6" y="140.24">Dome</text>
<polygon stroke-width="0" stroke="#a80136"
 fill="#a80136"
 points="110,105 112.4,101.8
110,111.4 107.6,101.8" />
<path stroke-width="1.333333"
 stroke="#a80136"
 d="M 268.4,63.4
 C 268.4,77.8 236.72,87.4 189.2,87.4 141.68,87.4 110,95.900505 110,108.651263" />
<text font-size="11pt" stroke-width="0.266667"
 fill="black"
 x="189.2" y="84.733333">flash</text>
<rect stroke-width="2"
 stroke-dasharray="5.6,4"
 x="2" y="1" width="153.6" height="172.8" />
</g></svg>
</div>
<p class="caption"><span class="caption-text">CCeH design</span><a class="headerlink" href="#id7" title="Permalink to this image">¶</a></p>
</div>
<p>In the CCeH design you don’t need to program any interval into the controller
because the camera itself tells the controller what to do.  The system will go
as fast as the camera allows and never miss an exposure.</p>
<p>The camera is in continuous-shot mode.  The controller presses the camera
shutter button and keeps it pressed.  The camera initializes and when it is
about to take an exposure it signals this on its external flash output.  The LED
driver listens to this signal and turns on the next LED.  When the camera is
done with the exposure it resets the flash output and the driver turns off the
LED.  The camera saves the picture.  This flash cycle repeats until all LEDs
have flashed.  Then the LED driver will tell the controller to release the
shutter button and the camera will stop.</p>
<div class="figure align-center" id="id8">
<div class="pic">
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="642px" preserveAspectRatio="none" style="width:528px;height:642px;" version="1.1" viewBox="0 0 528 642" width="528px" zoomAndPan="magnify"><defs><filter height="300%" id="f1kaz18kqwicap" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><rect fill="#FFFFFF" filter="url(#f1kaz18kqwicap)" height="116.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="278" y="228.9609"/><rect fill="#CCCCCC" filter="url(#f1kaz18kqwicap)" height="97.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="278" y="374.4922"/><rect fill="#FFFFFF" filter="url(#f1kaz18kqwicap)" height="116.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472" y="258.0938"/><rect fill="#FFFFFF" filter="url(#f1kaz18kqwicap)" height="288.9297" style="stroke: #000000; stroke-width: 2.0;" width="307" x="210" y="190.6953"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="27" x2="27" y1="86.2969" y2="554.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="161.5" x2="161.5" y1="86.2969" y2="554.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="282.5" x2="282.5" y1="86.2969" y2="554.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="372.5" x2="372.5" y1="86.2969" y2="554.8906"/><line style="stroke: #A80036; stroke-width: 1.0; stroke-dasharray: 5.0,5.0;" x1="477" x2="477" y1="86.2969" y2="554.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="82.9951">User</text><ellipse cx="27" cy="13" fill="#FEFECE" filter="url(#f1kaz18kqwicap)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,21 L27,48 M14,29 L40,29 M27,48 L14,63 M27,48 L40,63 " fill="none" filter="url(#f1kaz18kqwicap)" style="stroke: #A80036; stroke-width: 2.0;"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="32" x="8" y="566.8857">User</text><ellipse cx="27" cy="580.1875" fill="#FEFECE" filter="url(#f1kaz18kqwicap)" rx="8" ry="8" style="stroke: #A80036; stroke-width: 2.0;"/><path d="M27,588.1875 L27,615.1875 M14,596.1875 L40,596.1875 M27,615.1875 L14,630.1875 M27,615.1875 L40,630.1875 " fill="none" filter="url(#f1kaz18kqwicap)" style="stroke: #A80036; stroke-width: 2.0;"/><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="119.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="126.5" y="70.9951">Controller</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="81" x="119.5" y="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="67" x="126.5" y="573.8857">Controller</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="247.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="254.5" y="70.9951">Camera</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="67" x="247.5" y="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="53" x="254.5" y="573.8857">Camera</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="328.5" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="335.5" y="70.9951">LED Driver</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="85" x="328.5" y="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="71" x="335.5" y="573.8857">LED Driver</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="447" y="51"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="454" y="70.9951">Dome</text><rect fill="#FEFECE" filter="url(#f1kaz18kqwicap)" height="30.2969" style="stroke: #A80036; stroke-width: 1.5;" width="56" x="447" y="553.8906"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacingAndGlyphs" textLength="42" x="454" y="573.8857">Dome</text><rect fill="#FFFFFF" filter="url(#f1kaz18kqwicap)" height="116.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="278" y="228.9609"/><rect fill="#CCCCCC" filter="url(#f1kaz18kqwicap)" height="97.1328" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="278" y="374.4922"/><rect fill="#FFFFFF" filter="url(#f1kaz18kqwicap)" height="116.3984" style="stroke: #A80036; stroke-width: 1.0;" width="10" x="472" y="258.0938"/><polygon fill="#A80036" points="271,113.4297,281,117.4297,271,121.4297,275,117.4297" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="277" y1="117.4297" y2="117.4297"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="83" x="34" y="112.3638">set exposure</text><polygon fill="#A80036" points="150,142.5625,160,146.5625,150,150.5625,154,146.5625" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="27" x2="156" y1="146.5625" y2="146.5625"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="111" x="34" y="141.4966">push start button</text><polygon fill="#A80036" points="271,171.6953,281,175.6953,271,179.6953,275,175.6953" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162" x2="277" y1="175.6953" y2="175.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="85" x="169" y="170.6294">press shutter</text><path d="M210,190.6953 L287,190.6953 L287,197.6953 L277,207.6953 L210,207.6953 L210,190.6953 " fill="#EEEEEE" style="stroke: #000000; stroke-width: 1.0;"/><rect fill="none" height="288.9297" style="stroke: #000000; stroke-width: 2.0;" width="307" x="210" y="190.6953"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="32" x="225" y="203.7622">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="136" x="302" y="202.9058">[on all LEDs in dome]</text><polygon fill="#A80036" points="361,224.9609,371,228.9609,361,232.9609,365,228.9609" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="288" x2="367" y1="228.9609" y2="228.9609"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="295" y="223.895">flash on</text><polygon fill="#A80036" points="460,254.0938,470,258.0938,460,262.0938,464,258.0938" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="466" y1="258.0938" y2="258.0938"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="380" y="253.0278">turn LED on</text><polygon fill="#FBFB77" filter="url(#f1kaz18kqwicap)" points="230,271.0938,336,271.0938,346,282.0938,336,294.0938,230,294.0938,220,282.0938,230,271.0938" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="102" x="232" y="287.1606">taking exposure</text><polygon fill="#A80036" points="361,341.3594,371,345.3594,361,349.3594,365,345.3594" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="283" x2="367" y1="345.3594" y2="345.3594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="50" x="290" y="340.2935">flash off</text><polygon fill="#A80036" points="465,370.4922,475,374.4922,465,378.4922,469,374.4922" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="373" x2="471" y1="374.4922" y2="374.4922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="75" x="380" y="369.4263">turn LED off</text><polygon fill="#FBFB77" filter="url(#f1kaz18kqwicap)" points="236,412.4922,329,412.4922,339,423.4922,329,435.4922,236,435.4922,226,423.4922,236,412.4922" style="stroke: #A80036; stroke-width: 1.0;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="89" x="238" y="428.5591">saving picture</text><polygon fill="#FFFFFF" points="465,467.625,475,471.625,465,475.625,469,471.625" style="stroke: #FFFFFF; stroke-width: 1.0;"/><line style="stroke: #FFFFFF; stroke-width: 1.0;" x1="373" x2="471" y1="471.625" y2="471.625"/><polygon fill="#A80036" points="173,503.7578,163,507.7578,173,511.7578,169,507.7578" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="167" x2="372" y1="507.7578" y2="507.7578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="52" x="179" y="502.6919">last LED</text><polygon fill="#A80036" points="271,532.8906,281,536.8906,271,540.8906,275,536.8906" style="stroke: #A80036; stroke-width: 1.0;"/><line style="stroke: #A80036; stroke-width: 1.0;" x1="162" x2="277" y1="536.8906" y2="536.8906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacingAndGlyphs" textLength="97" x="169" y="531.8247">release shutter</text><!--
@startuml
actor User               as u
participant Controller   as ctrl
participant Camera       as cam
participant "LED Driver" as drv
participant Dome         as dome

u -> cam  : set exposure
u -> ctrl : push start button

ctrl -> cam : press shutter

loop on all LEDs in dome
cam -> drv  : flash on
activate cam
drv -> dome : turn LED on
activate dome
hnote over cam : taking exposure
|||
cam -> drv  : flash off
deactivate cam
drv -> dome : turn LED off
deactivate dome
activate cam #ccc
|||
hnote over cam : saving picture
|||
drv -[#transparent]> dome
deactivate cam
end

drv  -> ctrl : last LED
ctrl -> cam  : release shutter
@enduml

PlantUML version 1.2018.13(Mon Nov 26 18:11:51 CET 2018)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Java Version: 11.0.6+10-post-Debian-1
Operating System: Linux
OS Version: 5.3.0-3-amd64
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg></div>
<p class="caption"><span class="caption-text">CCeH design sequence diagram</span><a class="headerlink" href="#id8" title="Permalink to this image">¶</a></p>
</div>
<p>This design conserves energy, because the LEDs are turned on only for the time
needed to take the exposure, and turned off during the time the camera processes
and stores the image.  You want this in battery-powered domes.</p>
</div>
<div class="section" id="choice-of-led">
<h2>Choice of LED<a class="headerlink" href="#choice-of-led" title="Permalink to this headline">¶</a></h2>
<p>Consider the following points before selecting an LED make.</p>
<p>Performance:</p>
<blockquote>
<div><p>Luminous LEDs allow fast work and great focal depth.  Look for LEDs specified
to 100 lm (lumen) or more.</p>
</div></blockquote>
<p>Light quality:</p>
<blockquote>
<div><p>Especially important if you want to take color pictures.  Look for a Color
Rendering Index (CRI) of 90 or more.</p>
</div></blockquote>
<p>Price:</p>
<blockquote>
<div><p>High performance LEDs are expensive.</p>
</div></blockquote>
<p>Mounting:</p>
<blockquote>
<div><p>High performance LEDs are designed for reflow soldering, which makes them hard
to solder by hand.  You must solder each LED to a small board before you can
use them or buy them pre-soldered (expensive).  Test your ability to solder
the LED make before buying quantities.</p>
</div></blockquote>
<p>This is a choice of LED makes (as of 2017).</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 12%" />
<col style="width: 32%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 4%" />
<col style="width: 5%" />
<col style="width: 5%" />
<col style="width: 7%" />
<col style="width: 9%" />
<col style="width: 16%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Series</p></th>
<th class="head"><p>Part.No.</p></th>
<th class="head"><p>lm</p></th>
<th class="head"><p>V</p></th>
<th class="head"><p>mA</p></th>
<th class="head"><p>Case</p></th>
<th class="head"><p>€</p></th>
<th class="head"><p>MinQty</p></th>
<th class="head"><p>Distr.</p></th>
<th class="head"><p>No</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Duris S 10</p></td>
<td><p>GW P7LP32.EM-RSRU-XX52-1</p></td>
<td><p>1400</p></td>
<td><p>38.0</p></td>
<td><p>300</p></td>
<td><p>7070</p></td>
<td><p>1.90</p></td>
<td><p>50</p></td>
<td><p>RS</p></td>
<td><p>8792889</p></td>
</tr>
<tr class="row-odd"><td><p>Duris S 10</p></td>
<td><p>GW P7LM32.EM-QURQ-XX52-1</p></td>
<td><p>1050</p></td>
<td><p>28.5</p></td>
<td><p>300</p></td>
<td><p>7070</p></td>
<td><p>1.72</p></td>
<td><p>50</p></td>
<td><p>Mouser</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>Duris S 8</p></td>
<td><p>GW P9LT31.EM-PSPU-XX52-1</p></td>
<td><p>610</p></td>
<td><p>31.0</p></td>
<td><p>150</p></td>
<td><p>5050</p></td>
<td><p>0.96</p></td>
<td><p>25</p></td>
<td><p>DigiKey</p></td>
<td><p>475-3200-1-ND</p></td>
</tr>
<tr class="row-odd"><td><p>Duris S 8</p></td>
<td><p>GW P9LT32.EM-PSPU-XX52-1</p></td>
<td><p>610</p></td>
<td><p>6.2</p></td>
<td><p>750</p></td>
<td><p>5050</p></td>
<td><p>0.96</p></td>
<td><p>25</p></td>
<td><p>DigiKey</p></td>
<td><p>475-3207-1-ND</p></td>
</tr>
<tr class="row-even"><td><p>Duris S 8</p></td>
<td><p>GW P9LR31.EM-PQPS-XX52-1</p></td>
<td><p>500</p></td>
<td><p>24.8</p></td>
<td><p>150</p></td>
<td><p>5050</p></td>
<td><p>0.76</p></td>
<td><p>25</p></td>
<td><p>DigiKey</p></td>
<td><p>475-3187-1-ND</p></td>
</tr>
<tr class="row-odd"><td><p>Duris S 8</p></td>
<td><p>GW P9LR32.EM-PQPS-XX52-1</p></td>
<td><p>500</p></td>
<td><p>6.2</p></td>
<td><p>600</p></td>
<td><p>5050</p></td>
<td><p>0.80</p></td>
<td><p>25</p></td>
<td><p>DigiKey</p></td>
<td><p>475-3193-1-ND</p></td>
</tr>
<tr class="row-even"><td><p>Duris S 8</p></td>
<td><p>GW P9LMS1.EM-NSNU-57S5-0</p></td>
<td><p>395</p></td>
<td><p>19.8</p></td>
<td><p>200</p></td>
<td><p>4SMD</p></td>
<td><p>0.91</p></td>
<td><p>50</p></td>
<td><p>RS</p></td>
<td><p>8108054</p></td>
</tr>
<tr class="row-odd"><td><p>Duris S 8</p></td>
<td><p>GW P9LMS2.EM-NQNS-57S5-0</p></td>
<td><p>350</p></td>
<td><p>19.8</p></td>
<td><p>200</p></td>
<td><p>4SMD</p></td>
<td><p>0.60</p></td>
<td><p>50</p></td>
<td><p>RS</p></td>
<td><p>8768969</p></td>
</tr>
</tbody>
</table>
<p>For our dome we selected the make: <em>Osram Duris S8 GW P9LMS1.EM-NSNU-57S5-0</em>
mainly because they were comparatively easy to solder by hand.  They come in 5 ×
5 mm (4SMD) packages, which we then soldered onto postage-stamp sized pieces we
cut out of a standard 2.54” striped PCB.</p>
<div class="figure align-center" id="id9">
<img alt="_images/DSC_2886.jpg" src="_images/DSC_2886.jpg" />
<p class="caption"><span class="caption-text">Two LEDs soldered to a standard striped PCB.</span><a class="headerlink" href="#id9" title="Permalink to this image">¶</a></p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The power-LED market has short product cycles.  You must buy enough
LEDs for replacement purposes.</p>
</div>
</div>
<div class="section" id="led-driver">
<h2>Led Driver<a class="headerlink" href="#led-driver" title="Permalink to this headline">¶</a></h2>
<p>The LED driver section we designed is very flexible.  Adjusting component values
you can drive almost any LED up to 1.5A / 80V.  The components you have to
adjust are the resistor of the LM317 constant current source and the base
resistors of the high-side BD140 PNP transistors.</p>
<p>With VLED up to 35V you can use a single power supply.  Over that value you must
use separate power supplies for VLED and VCPU.  Separate batteries for VLED and
VCPU are also advisable for battery-powered operation.</p>
<p>Now we calculate VLED.  The chosen LEDs have a forward voltage of:</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 43%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>V_f</p></th>
<th class="head"><p>V</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>min</p></td>
<td><p>18.6</p></td>
</tr>
<tr class="row-odd"><td><p>typ</p></td>
<td><p>19.8</p></td>
</tr>
<tr class="row-even"><td><p>max</p></td>
<td><p>22.2</p></td>
</tr>
</tbody>
</table>
<p>&#64; a forward current of 200mA.</p>
<p>Cold LEDs have a higher forward voltage.  Ours are turned on for short periods
only, so they will be cold.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>LM 317 Drop-Out Voltage  (@ I_O = 200mA, T_j = 25°C)       =  1.65V
LM 317 V_adjust                                            =  1.25V
BD 140 C-E Saturation Voltage (@ I_C = -0.5A, I_B = -50mA) = -0.5V
</pre></div>
</div>
<p>This gives us a drop of at least 3.9V, ergo, the power supply should be at least
V_f max + 3.9V = 26.1V.</p>
</div>
<div class="section" id="constant-current-source">
<h2>Constant Current Source<a class="headerlink" href="#constant-current-source" title="Permalink to this headline">¶</a></h2>
<p>To get even luminosity we use an LM317 as constant current source.  The
adjustment resistor value is given by:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">R_adj</span> <span class="o">=</span> <span class="mf">1.25</span><span class="n">V</span> <span class="o">/</span> <span class="n">I_O</span>
<span class="n">R_adj</span> <span class="o">=</span> <span class="mf">1.25</span><span class="n">V</span> <span class="o">/</span> <span class="mi">200</span><span class="n">mA</span> <span class="o">=</span> <span class="mf">6.25</span><span class="n">ohm</span><span class="p">,</span> <span class="mf">0.25</span><span class="n">W</span>
</pre></div>
</div>
<p>The nearest standard value is 6.2ohm E24 (or 4.7ohm + 1.5ohm E12).</p>
<p>N.B. the constant current source also drives the bases of the high-side BD140
transistors, which sink 10mA with the chosen resistors (but would need 40mA of
base current to switch 1.5A LEDs).</p>
</div>
<div class="section" id="microcontroller">
<h2>Microcontroller<a class="headerlink" href="#microcontroller" title="Permalink to this headline">¶</a></h2>
<p>The project uses an ATmega328p microcontroller because it was prototyped on an
Arduino Nano.</p>
</div>
<div class="section" id="connectors">
<h2>Connectors<a class="headerlink" href="#connectors" title="Permalink to this headline">¶</a></h2>
<p>The device commands the camera through the remote control interface which is
found on most camera models.  Interface cables for Nikon, Canon and all other
major brands are also available at low cost from third party suppliers.  The
cables have a standard 3-way jack at one side and the proprietary camera
connector at the other.</p>
<p>The camera commands the flash through a <a class="reference internal" href="glossary.html#term-pc-sync"><span class="xref std std-term">PC Sync</span></a> connector. PC Sync
cables are standard photografic gear and are available at low cost from many
manufacturers.</p>
</div>
<div class="section" id="board-layout">
<h2>Board Layout<a class="headerlink" href="#board-layout" title="Permalink to this headline">¶</a></h2>
<p>The board is layed out as 1/2 Eurocard (100 × 80 mm).</p>
<p>The back of the board holds a few standard connectors and can be mounted flush
against the back panel.  You may choose different connectors if you don’t mount
them directly to the PCB board.</p>
<div class="figure align-center" id="id10">
<img alt="_images/DSC_2858.jpg" src="_images/DSC_2858.jpg" />
<p class="caption"><span class="caption-text">The PCB component side front view.</span><a class="headerlink" href="#id10" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id11">
<img alt="_images/DSC_2857.jpg" src="_images/DSC_2857.jpg" />
<p class="caption"><span class="caption-text">The PCB component side back view.</span><a class="headerlink" href="#id11" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id12">
<img alt="_images/DSC_2863.jpg" src="_images/DSC_2863.jpg" />
<p class="caption"><span class="caption-text">The PCB solder side.</span><a class="headerlink" href="#id12" title="Permalink to this image">¶</a></p>
</div>
</div>
<div class="section" id="case">
<h2>Case<a class="headerlink" href="#case" title="Permalink to this headline">¶</a></h2>
<p>It is highly recommended to put the board into a case.  The make of the case is
up to you.  (You can also try to place the board inside the dome if there is
room.)</p>
<p>We used a case made of 2 <em>Fischer Elektronik KO H 2</em> halves, which offers room
for a 100 × 100 mm PCB.  The CAD drawings of front and back panel where printed on
paper and then spotted through with a scriber, drilled and filed to shape.</p>
<div class="figure align-center" id="id13">
<img alt="_images/DSC_2827.jpg" src="_images/DSC_2827.jpg" />
<p class="caption"><span class="caption-text">The front panel.</span><a class="headerlink" href="#id13" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id14">
<img alt="_images/DSC_2829.jpg" src="_images/DSC_2829.jpg" />
<p class="caption"><span class="caption-text">The back panel.</span><a class="headerlink" href="#id14" title="Permalink to this image">¶</a></p>
</div>
<div class="figure align-center" id="id15">
<img alt="_images/DSC_2842.jpg" src="_images/DSC_2842.jpg" />
<p class="caption"><span class="caption-text">The mounted PCB.</span><a class="headerlink" href="#id15" title="Permalink to this image">¶</a></p>
</div>
</div>
</div>
<div class="section" id="footnotes">
<h1>Footnotes<a class="headerlink" href="#footnotes" title="Permalink to this headline">¶</a></h1>
<dl class="footnote brackets">
<dt class="label" id="id3"><span class="brackets"><a class="fn-backref" href="#id1">1</a></span></dt>
<dd><p>Leszek Pawlowicz.  Affordable Reflectance Transformation Imaging Dome.
<a class="reference external" href="https://artid.readthedocs.io/en/latest/index.html">https://artid.readthedocs.io/en/latest/index.html</a></p>
</dd>
<dt class="label" id="id4"><span class="brackets"><a class="fn-backref" href="#id2">2</a></span></dt>
<dd><p>Ted Kinsman.  An Easy To Build Reflectance Transformation Imaging (RTI) System.
<a class="reference external" href="https://firstmonday.org/ojs/index.php/jbc/article/view/6625/5594">https://firstmonday.org/ojs/index.php/jbc/article/view/6625/5594</a></p>
</dd>
</dl>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="user.html" class="btn btn-neutral float-right" title="Dome User Manual" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="builder.html" class="btn btn-neutral float-left" title="Dome Builder Manual" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017-18 CCeH - Licensed under the GNU GPL v3 or later

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>